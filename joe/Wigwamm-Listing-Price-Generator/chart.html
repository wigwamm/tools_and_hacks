<div id="chart" style="width: 600px; height: 400px;"></div>
<script>
function drawVisualization() {
var ul = JSON.parse(document.baseURI.split('=')[1].split('&')[0]);
    // Create and populate the data table.
    var data = new google.visualization.DataTable();
    var selected = new google.visualization.DataTable();
    data.addColumn('number', 'Price');
    data.addColumn('number', 'Score');
    data.addColumn('number', 'My Score');
    data.addColumn('number', 'Selected');
    
    for(pgs=0; pgs<ul.length; pgs++) {
	for(pos=0; pos<$(ul)[pgs].children.length; pos++) {
	    data.addRow([+$('ul')[pgs].children[pos].innerHTML,calcScore(pos,pgs),null,null]);
	}
    };
    
    data.addRow([+$('#myPrice').val(),null,+$('#score').text(),null]);

    $('.ui-selected').map(function(index,value){
	console.log(calcScore($(value).index(),+$(value).parent().attr('id')/10))
	debugger;
	data.addRow([+$(value).text(),null,null,calcScore($(value).index(),+$(value).parent().attr('id')/10)]);
    });
    // Create and draw the visualization.
    var chart = new google.visualization.ScatterChart(
        document.getElementById('chart'));
    chart.draw(data, {title: 'Score and Price',
                      width: 600, height: 400,
                      vAxis: {title: "Wigwamm Listing Score", titleTextStyle: {color: "green"}},
                      hAxis: {title: "Listing Price", titleTextStyle: {color: "green"}},
		      legend:'none',
		      colors:['blue','red','green'],
		      trendlines: { 0: {} }
		     }
              );
}
</script>
